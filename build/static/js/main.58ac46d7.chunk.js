(this["webpackJsonpfile-upload-app"]=this["webpackJsonpfile-upload-app"]||[]).push([[0],{22:function(e,t,l){e.exports=l(48)},27:function(e,t,l){},28:function(e,t,l){},47:function(e,t,l){e.exports=l.p+"static/media/sasken.9508a978.png"},48:function(e,t,l){"use strict";l.r(t);var a=l(0),n=l.n(a),r=l(20),o=l.n(r),c=(l(27),l(3)),s=l(4),i=l(6),u=l(5),d=l(7),m=(l(28),l(8)),p=l.n(m),f=l(50),h=function(e){function t(e){var l;return Object(c.a)(this,t),(l=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){(console.log("file selected"),null!=e.target.files[0])?e.target.files[0].size/1024/1024>1?(alert("File size exceeds 1 MB"),l.setState({selectedFile:null,isFileSelected:!1}),document.getElementById("fileControl").value=""):(console.log("file selected"),l.setState({selectedFile:e.target.files[0],isFileSelected:!0})):(console.log("file not selected"),l.setState({selectedFile:null,isFileSelected:!1}))},l.uploadFile=function(e){var t="".concat("https://serverfileupload.herokuapp.com/","uploadfile"),a=new FormData;a.append("myFile",e);var n={onUploadProgress:function(e){var t=e.loaded,l=e.total,a=Math.floor(100*t/l);console.log("".concat(t,"kb of ").concat(l,"kb | ").concat(a,"%")),console.log(this.uploadPercentage),a<100&&this.setState({uploadPercentage:a})}};p.a.post(t,a,n).then((function(e){console.log("Indside RESPONSE"),console.log(e),l.props.refresh(),document.getElementById("fileControl").value="",l.setState({selectedFile:null,isFileSelected:!1,uploadPercentage:100},(function(){setTimeout((function(){l.setState({uploadPercentage:0})}),1e3)}))})).catch((function(e){console.log(e.response),e.response?alert("Error : ".concat(e.response.data.message)):alert("".concat(e))}))},l.state={selectedFile:null,isFileSelected:!1,uploadPercentage:0},l}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.uploadPercentage;return n.a.createElement("div",{className:"fileUpload"},n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement("h2",null,"Upload Files:"),n.a.createElement("br",null),n.a.createElement("input",{type:"file",id:"fileControl",accept:".txt,.jpeg,.pdf,.json,.odt,.jpeg,.png,.jpg",name:"file",onChange:this.changeHandler}),this.state.isFileSelected?n.a.createElement("button",{className:"upload",onClick:function(){return e.uploadFile(e.state.selectedFile)}},"Upload"):null),n.a.createElement("br",null),n.a.createElement("div",null,t>0&&n.a.createElement(f.a,{striped:!0,animated:!0,now:t,label:"".concat(t,"%")})),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement("label",null," ",n.a.createElement("p",null,"  Only upload the text, pdf, json and image files.")," And file size should be less than 1MB.")))}}]),t}(a.Component),E=function(e){function t(e){var l;return Object(c.a)(this,t),(l=Object(i.a)(this,Object(u.a)(t).call(this,e))).refreshFileList=function(){p.a.get("".concat("https://serverfileupload.herokuapp.com/","listfiles")).then((function(e){console.log("@@@@@@@@@@@@"),console.log(e.data),l.setState({fileArr:e.data,searchResultArr:e.data})})).catch((function(e){e.response?alert("Error : ".concat(e.response.data.message)):alert("".concat(e)),console.log(e)}))},l.deleteFile=function(e){if(e){if(window.confirm("Do you want to delete the item ".concat(e,"?"))){var t="".concat("https://serverfileupload.herokuapp.com/","deletefile/");p.a.delete("".concat(t).concat(e)).then((function(e){console.log(e),l.refreshFileList()})).catch((function(e){e.response?alert("Error : ".concat(e.response.data.message)):alert("".concat(e)),console.log(e)}))}}else alert("Unable to delete a file")},l.searchHandler=function(e){var t=l.state.fileArr.filter((function(t){return t.FileID.includes(e.target.value.toLowerCase())}));""!==e.target.value?l.setState({fileArr:t}):(console.log("empty search"),l.setState({fileArr:l.state.searchResultArr})),0===t.length&&l.setState({fileArr:l.state.searchResultArr})},l.state={fileArr:[],searchResultArr:[],refresh:!1},l}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("Did mount"),this.refreshFileList()}},{key:"componentWillReceiveProps",value:function(){console.log("Will recieve prps"),this.refreshFileList()}},{key:"renderTableData",value:function(){var e=this;return console.log(this.props),this.state.fileArr.map((function(t){var l=t.FileID,a=t.FileName,r=t.FileSize,o=t.FileUploadedDate;return console.log("----INSIDE RENDER -----"),n.a.createElement("tr",{key:l},n.a.createElement("td",null),n.a.createElement("td",null,l),n.a.createElement("td",null,a),n.a.createElement("td",null,new Date(o).toString().split(" ").slice(0,5).join(" ")),n.a.createElement("td",null,r),n.a.createElement("td",null,n.a.createElement("button",{className:"delete",onClick:function(){return e.deleteFile(l)}},"Delete")))}))}},{key:"render",value:function(e){return this.state.fileArr.length>0?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("h2",null,"Uploaded Files List:"),n.a.createElement("div",{className:"search"},n.a.createElement("input",{type:"text",placeholder:"Search file by id",onChange:this.searchHandler})),n.a.createElement("div",{className:"tableDiv"},n.a.createElement("table",{className:"css-serial"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Sl. No"),n.a.createElement("th",null,"File Id"),n.a.createElement("th",null,"File Name"),n.a.createElement("th",null,"Uploaded Date"),n.a.createElement("th",null,"File Size (Bytes)"),n.a.createElement("th",null,"Delete"))),n.a.createElement("tbody",null,this.renderTableData())))):n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("h2",null,"Uploaded Files List:"),n.a.createElement("p",null,"No files uploaded"))}}]),t}(a.Component),g=(l(46),function(e){function t(){var e,l;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(l=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).refreshFileList=function(){console.log("File uploaded succesfully"),l.setState({state:l.state})},l}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"header"},n.a.createElement("h1",null,"File Uploading App"),n.a.createElement("h2",null,"Version"),n.a.createElement("img",{src:l(47)})),n.a.createElement("h1",{className:"footer"},"\xa9 2020 Sasken Technologies Limited"),n.a.createElement("hr",{className:"dotted"}),n.a.createElement("div",{className:"fileUpload"},n.a.createElement(h,{refresh:this.refreshFileList})),n.a.createElement("div",{className:"fileList"},n.a.createElement(E,null)))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.58ac46d7.chunk.js.map